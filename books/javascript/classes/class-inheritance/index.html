<!DOCTYPE html>
<html lang="en">

<head>


  <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <base href="/">
    <title>Project Madurai School</title>

    
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/images/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/images/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/images/favicon-16x16.png"
    />
    <link rel="manifest" href="/images/site.webmanifest" />

    
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />


    

    <link rel="stylesheet" href="/css/style.css"/>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css"
      integrity="sha256-h20CPZ0QyXlBuAw7A+KluUYx/3pK+c7lYEpqLTlxjYQ="
      crossorigin="anonymous"
    />



  


</head>

<body>
  <main class="container mt-5 w-100 h-100">
    <nav class="navbar navbar-expand-md navbar-light bg-white py-0 fixed-top">
  <div class="container-fluid border-bottom border-top-1 shadow-sm bg-body">
    <a class="navbar-brand lh-1" href="/">
      
      
        <span class="text-primary"><strong>Project Madurai</strong></span><br>
        <p class="text-muted text-end w-100 p-0 mb-0"><small class="dropdown-toggle">தமிழ்</small></p>
      </a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsExampleDefault"
      aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarsExampleDefault">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link active" href="/books/javascript">Javascript</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="/books/c">C</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="/practices/java">Java</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="/posts">Blog</a>
        </li>
      </ul>
      <form class="d-flex">
        <input class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>
      <ul class="navbar-nav secured">
        <li class="nav-item btn pe-0">
          <a class="nav-link" href="/chat"><i class="far fa-comment-dots fa-2x"></i></a>
        </li>
        <li class="nav-item pe-0 dropdown">
          
          <div class="btn-group bg-light">
            <a class="btn btn-toggle pe-0" data-bs-toggle="dropdown" aria-expanded="false">
              <div class="d-flex bd-highlight">
                <div class="w-100 bd-highlight text-end">
                  <h6 class="text-muted fw-bold">தமிழ்ச் சங்கம்</h6>
                  <small class="text-muted">திருவள்ளுவர் கழகம்</small>
               </div>
                <div class="flex-shrink-1 bd-highlight">
                  <img src="http://ssl.gstatic.com/accounts/ui/avatar_2x.png" class="img-circle img-thumbnail avatar"
                style="vertical-align: middle;border-radius: 50%; width: 3rem; margin-right: 10px;" alt="avatar">
                </div>
                
                
              </div>
            </a>
            <ul class="dropdown-menu" aria-labelledby="dropdown03">
              <li><a class="dropdown-item" href="javascript://">Profile</a></li>
              <li><a class="dropdown-item" href="/campuses/tamil-sangam">Campus</a></li>
              <li><a class="dropdown-item logout" href="javascript://">Logout</a></li>
            </ul>
          </div>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div class="row py-5 w-100 h-100">
       

  <nav class="navbar border-1 border-bottom">
  <div class="row w-100">
    <div class="col-4">
      <a href="/books/javascript/classes/class-basic-syntax">Class basic syntax</a>
    </div>
    <div class="col-4 mb-2 text-center">
      <a class="text-dark"
        href="/books/javascript/classes">Classes</a>
    </div>
    <div class="col-4 d-flex justify-content-end align-items-center">
      <a href="/books/javascript/classes/static-properties-methods">Static properties and methods</a>
    </div>
  </div>
</nav>

<main id="content" class="pt-3"><h2 id="class-inheritance">Class inheritance</h2>
<p>Class inheritance is a way for one class to extend another class.</p>
<p>So we can create new functionality on top of the existing.</p>
<h3 id="the-extends-keyword"><a href="">The “extends” keyword</a></h3>
<h4 id="lets-say-we-have-class--animal">Let’s say we have class  <code>Animal</code>:</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#ae81ff">1</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Animal</span> {
<span style="color:#ae81ff">2</span>   <span style="color:#a6e22e">constructor</span>(<span style="color:#a6e22e">name</span>) {
<span style="color:#ae81ff">3</span>     <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">speed</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
<span style="color:#ae81ff">4</span>     <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">name</span>;
<span style="color:#ae81ff">5</span>   }
<span style="color:#ae81ff">6</span>   <span style="color:#a6e22e">run</span>(<span style="color:#a6e22e">speed</span>) {
<span style="color:#ae81ff">7</span>     <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">speed</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">speed</span>;
<span style="color:#ae81ff">8</span>     <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> runs with speed </span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">speed</span><span style="color:#e6db74">}</span><span style="color:#e6db74">.`</span>);
<span style="color:#ae81ff">9</span>   }
<span style="color:#ae81ff">10</span>   <span style="color:#a6e22e">stop</span>() {
<span style="color:#ae81ff">11</span>     <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">speed</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
<span style="color:#ae81ff">12</span>     <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> stands still.`</span>);
<span style="color:#ae81ff">13</span>   }
<span style="color:#ae81ff">14</span> }
<span style="color:#ae81ff">15</span> 
<span style="color:#ae81ff">16</span> <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">animal</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Animal</span>(<span style="color:#e6db74">&#34;My animal&#34;</span>);
</code></pre></div><h4 id="heres-how-we-can-represent-animal-object-and-animal-class-graphically">Here’s how we can represent animal object and Animal class graphically:</h4>
<hr>
<img src="/images/cls.jpg" width="50%" height="400px" alt="flowchart">
<hr>
<p>…And we would like to create another <code>class Rabbit</code>.</p>
<p>As rabbits are animals, <code>Rabbit</code> class should be based on <code>Animal</code>, have access to animal methods, so that rabbits can do what “generic” animals can do.</p>
<p>The syntax to extend another class is: <code>class Child extends Parent</code>.</p>
<p>Let’s create<code> class Rabbit</code> that inherits from <code>Animal</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#ae81ff">1</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Rabbit</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Animal</span> {
<span style="color:#ae81ff">2</span>   <span style="color:#a6e22e">hide</span>() {
<span style="color:#ae81ff">3</span>     <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> hides!`</span>);
<span style="color:#ae81ff">4</span>   }
<span style="color:#ae81ff">5</span> }
<span style="color:#ae81ff">6</span> 
<span style="color:#ae81ff">7</span> <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">rabbit</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Rabbit</span>(<span style="color:#e6db74">&#34;White Rabbit&#34;</span>);
<span style="color:#ae81ff">8</span> 
<span style="color:#ae81ff">9</span> <span style="color:#a6e22e">rabbit</span>.<span style="color:#a6e22e">run</span>(<span style="color:#ae81ff">5</span>); <span style="color:#75715e">// White Rabbit runs with speed 5.
</span><span style="color:#75715e"></span><span style="color:#ae81ff">10</span> <span style="color:#a6e22e">rabbit</span>.<span style="color:#a6e22e">hide</span>(); <span style="color:#75715e">// White Rabbit hides!
</span></code></pre></div><p>Object of <code>Rabbit</code> class have access both to <code>Rabbit</code> methods, such as <code>rabbit.hide()</code>, and also to <code>Animal</code> methods, such as <code>rabbit.run()</code>.</p>
<p>Internally, <code>extends</code> keyword works using the good old prototype mechanics. It sets <code>Rabbit.prototype.[[Prototype]]</code> to <code>Animal.prototype</code>. So, if a method is not found in <code>Rabbit.prototype,</code> JavaScript takes it from <code>Animal.prototype</code>.</p>
<hr>
<img src="/images/clsi2.jpg" width="50%" height="400px" alt="flowchart">
<hr>
<h4 id="for-instance-to-find-rabbitrun-method-the-engine-checks-bottom-up-on-the-picture">For instance, to find <code>rabbit.run </code>method, the engine checks (bottom-up on the picture):</h4>
<p>1.The <code>rabbit</code> object (has no <code>run</code>).
2.Its prototype, that is <code>Rabbit.prototype </code>(has <code>hide</code>, but not <code>run</code>).
3.Its prototype, that is (due to <code>extends</code>) <code>Animal</code>.prototype, that finally has the <code>run</code> method.</p>
<p>As we can recall from the chapter <a href="">Native prototypes</a>, JavaScript itself uses prototypal inheritance for built-in objects. E.g.</p>
<p><code>Date.prototype.[[Prototype]]</code> is <code>Object.prototype</code>. That’s why dates have access to generic object methods.</p>
<h3 id="ℹ-any-expression-is-allowed-after-extends">ℹ️ Any expression is allowed after extends</h3>
<p>Class syntax allows to specify not just a class, but any expression after <code>extends</code>.</p>
<p>For instance, a function call that generates the parent class:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">f</span>(<span style="color:#a6e22e">phrase</span>) {
  <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">class</span> {
    <span style="color:#a6e22e">sayHi</span>() { <span style="color:#a6e22e">alert</span>(<span style="color:#a6e22e">phrase</span>); }
  };
}

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">User</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">f</span>(<span style="color:#e6db74">&#34;Hello&#34;</span>) {}

<span style="color:#66d9ef">new</span> <span style="color:#a6e22e">User</span>().<span style="color:#a6e22e">sayHi</span>(); <span style="color:#75715e">// Hello
</span></code></pre></div><p>Here <code>class User</code> inherits from the result of <code>f(&quot;Hello&quot;)</code>.</p>
<p>That may be useful for advanced programming patterns when we use functions to generate classes depending on many conditions and can inherit from them.</p>
<h3 id="overriding-a-method"><a href="">Overriding a method</a></h3>
<p>Now let’s move forward and override a method. By default, all methods that are not specified in <code>class Rabbit</code> are taken directly “as is” from <code>class Animal</code>.</p>
<p>But if we specify our own method in<code> Rabbit</code>, such as <code>stop()</code> then it will be used instead:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#ae81ff">1</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Rabbit</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Animal</span> {
<span style="color:#ae81ff">2</span>   <span style="color:#a6e22e">stop</span>() {
<span style="color:#ae81ff">3</span>     <span style="color:#75715e">// ...now this will be used for rabbit.stop()
</span><span style="color:#75715e"></span><span style="color:#ae81ff">4</span>     <span style="color:#75715e">// instead of stop() from class Animal
</span><span style="color:#75715e"></span><span style="color:#ae81ff">5</span>   }
<span style="color:#ae81ff">6</span> }
</code></pre></div><p>Usually we don’t want to totally replace a parent method, but rather to build on top of it to tweak or extend its functionality. We do something in our method, but call the parent method before/after it or in the process.</p>
<p>Classes provide <code>&quot;super&quot;</code> keyword for that.</p>
<ul>
<li>
<p><code> super.method(...)</code> to call a parent method.</p>
</li>
<li>
<p><code>super(...) </code>to call a parent constructor (inside our constructor only).</p>
</li>
</ul>
<h4 id="for-instance-let-our-rabbit-autohide-when-stopped">For instance, let our rabbit autohide when stopped:</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">
<span style="color:#ae81ff">1</span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Animal</span> {
<span style="color:#ae81ff">2</span>
<span style="color:#ae81ff">3</span>    <span style="color:#a6e22e">constructor</span>(<span style="color:#a6e22e">name</span>) {
<span style="color:#ae81ff">4</span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">speed</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
<span style="color:#ae81ff">5</span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">name</span>;
<span style="color:#ae81ff">6</span>    }
<span style="color:#ae81ff">7</span>
<span style="color:#ae81ff">8</span>    <span style="color:#a6e22e">run</span>(<span style="color:#a6e22e">speed</span>) {
<span style="color:#ae81ff">9</span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">speed</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">speed</span>;
<span style="color:#ae81ff">10</span>        <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> runs with speed </span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">speed</span><span style="color:#e6db74">}</span><span style="color:#e6db74">.`</span>);
<span style="color:#ae81ff">11</span>    }
<span style="color:#ae81ff">12</span>
<span style="color:#ae81ff">13</span>    <span style="color:#a6e22e">stop</span>() {
<span style="color:#ae81ff">14</span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">speed</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
<span style="color:#ae81ff">15</span>        <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> stands still.`</span>);
<span style="color:#ae81ff">16</span>    }
<span style="color:#ae81ff">17</span>
<span style="color:#ae81ff">18</span>    }
<span style="color:#ae81ff">19</span>
<span style="color:#ae81ff">20</span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Rabbit</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Animal</span> {
<span style="color:#ae81ff">21</span>    <span style="color:#a6e22e">hide</span>() {
<span style="color:#ae81ff">22</span>        <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> hides!`</span>);
<span style="color:#ae81ff">23</span>    }
<span style="color:#ae81ff">24</span>
<span style="color:#ae81ff">25</span>    <span style="color:#a6e22e">stop</span>() {
<span style="color:#ae81ff">26</span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">stop</span>(); <span style="color:#75715e">// call parent stop
</span><span style="color:#75715e"></span><span style="color:#ae81ff">27</span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">hide</span>(); <span style="color:#75715e">// and then hide
</span><span style="color:#75715e"></span><span style="color:#ae81ff">28</span>    }
<span style="color:#ae81ff">29</span>    }
<span style="color:#ae81ff">30</span>
<span style="color:#ae81ff">31</span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">rabbit</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Rabbit</span>(<span style="color:#e6db74">&#34;White Rabbit&#34;</span>);
<span style="color:#ae81ff">32</span>
<span style="color:#ae81ff">33</span>    <span style="color:#a6e22e">rabbit</span>.<span style="color:#a6e22e">run</span>(<span style="color:#ae81ff">5</span>); <span style="color:#75715e">// White Rabbit runs with speed 5.
</span><span style="color:#75715e"></span><span style="color:#ae81ff">34</span>    <span style="color:#a6e22e">rabbit</span>.<span style="color:#a6e22e">stop</span>(); <span style="color:#75715e">// White Rabbit stands still. White Rabbit hides!
</span></code></pre></div><p>Now Rabbit has the stop method that calls the parent super.stop() in the process.</p>
<hr>
<h3 id="ℹ-arrow-functions-have-no-super">ℹ️ Arrow functions have no super</h3>
<p>As was mentioned in the chapter <a href="">Arrow functions revisited</a>, arrow functions do not have super.</p>
<p>If accessed, it’s taken from the outer function. For instance:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">
<span style="color:#ae81ff">1</span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Rabbit</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Animal</span> {
<span style="color:#ae81ff">2</span>    <span style="color:#a6e22e">stop</span>() {
<span style="color:#ae81ff">3</span>        <span style="color:#a6e22e">setTimeout</span>(() =&gt; <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">stop</span>(), <span style="color:#ae81ff">1000</span>); <span style="color:#75715e">// call parent stop after 1sec
</span><span style="color:#75715e"></span><span style="color:#ae81ff">4</span>    }
<span style="color:#ae81ff">5</span>    }
</code></pre></div><p>The <code>super</code> in the arrow function is the same as in <code>stop()</code>, so it works as intended. If we specified a “regular” function here, there would be an error:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">
<span style="color:#ae81ff">1</span>    <span style="color:#75715e">// Unexpected super
</span><span style="color:#75715e"></span><span style="color:#ae81ff">2</span>    <span style="color:#a6e22e">setTimeout</span>(<span style="color:#66d9ef">function</span>() { <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">stop</span>() }, <span style="color:#ae81ff">1000</span>);
</code></pre></div><hr>
<h3 id="overriding-constructor"><a href="">Overriding constructor</a></h3>
<p>With constructors it gets a little bit tricky.</p>
<p>Until now, <code>Rabbit </code>did not have its own<code> constructor.</code></p>
<p>According to the <a href="">specification</a>, if a class extends another class and has no <code>constructor</code>, then the following “empty” <code>constructor</code> is generated:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">
<span style="color:#ae81ff">1</span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Rabbit</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Animal</span> {
<span style="color:#ae81ff">2</span>    <span style="color:#75715e">// generated for extending classes without own constructors
</span><span style="color:#75715e"></span><span style="color:#ae81ff">3</span>    <span style="color:#a6e22e">constructor</span>(...<span style="color:#a6e22e">args</span>) {
<span style="color:#ae81ff">4</span>    <span style="color:#66d9ef">super</span>(...<span style="color:#a6e22e">args</span>);
<span style="color:#ae81ff">5</span>    }
<span style="color:#ae81ff">6</span>    }
</code></pre></div><p>As we can see, it basically calls the parent <code>constructor</code> passing it all the arguments. That happens if we don’t write a constructor of our own.</p>
<p>Now let’s add a custom constructor to <code>Rabbit</code>. It will specify the<code>earLength</code>in addition to <code>name</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">
<span style="color:#ae81ff">1</span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Animal</span> {
<span style="color:#ae81ff">2</span>    <span style="color:#a6e22e">constructor</span>(<span style="color:#a6e22e">name</span>) {
<span style="color:#ae81ff">3</span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">speed</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
<span style="color:#ae81ff">4</span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">name</span>;
<span style="color:#ae81ff">5</span>    }
<span style="color:#ae81ff">6</span>    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span><span style="color:#ae81ff">7</span>    }
<span style="color:#ae81ff">8</span>
<span style="color:#ae81ff">9</span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Rabbit</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Animal</span> {
<span style="color:#ae81ff">10</span>
<span style="color:#ae81ff">11</span>    <span style="color:#a6e22e">constructor</span>(<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">earLength</span>) {
<span style="color:#ae81ff">12</span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">speed</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
<span style="color:#ae81ff">13</span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">name</span>;
<span style="color:#ae81ff">14</span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">earLength</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">earLength</span>;
<span style="color:#ae81ff">15</span>    }
<span style="color:#ae81ff">16</span>
<span style="color:#ae81ff">17</span>    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span><span style="color:#ae81ff">18</span>    }
<span style="color:#ae81ff">19</span>
<span style="color:#ae81ff">20</span>    <span style="color:#75715e">// Doesn&#39;t work!
</span><span style="color:#75715e"></span><span style="color:#ae81ff">21</span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">rabbit</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Rabbit</span>(<span style="color:#e6db74">&#34;White Rabbit&#34;</span>, <span style="color:#ae81ff">10</span>); <span style="color:#75715e">// Error: this is not defined.
</span></code></pre></div><p>Whoops! We’ve got an error. Now we can’t create rabbits. What went wrong?</p>
<h4 id="the-short-answer-is">The short answer is:</h4>
<ul>
<li>Constructors in inheriting classes must call <code>super(...)</code>, and (!) do it before using <code>this</code>.</li>
</ul>
<p>…But why? What’s going on here? Indeed, the requirement seems strange.</p>
<p>Of course, there’s an explanation. Let’s get into details, so you’ll really understand what’s going on.</p>
<p>In JavaScript, there’s a distinction between a constructor function of an inheriting class (so-called “derived constructor”) and other functions. A derived constructor has a special internal property <code>[[ConstructorKind]]:&quot;derived&quot;</code>. That’s a special internal label.</p>
<p>That label affects its behavior with<code> new</code>.</p>
<ul>
<li>When a regular function is executed with <code>new</code>, it creates an empty object and assigns it to <code>this</code>.</li>
<li>But when a derived constructor runs, it doesn’t do this. It expects the parent constructor to do this job.</li>
</ul>
<p>So a derived constructor must call <code>super</code> in order to execute its parent (base) constructor, otherwise the object for <code>this</code> won’t be created. And we’ll get an error.</p>
<p>For the <code>Rabbit</code> constructor to work, it needs to call <code>super()</code> before using <code>this</code>, like here:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">
<span style="color:#ae81ff">1</span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Animal</span> {
<span style="color:#ae81ff">2</span>
<span style="color:#ae81ff">3</span>    <span style="color:#a6e22e">constructor</span>(<span style="color:#a6e22e">name</span>) {
<span style="color:#ae81ff">4</span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">speed</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
<span style="color:#ae81ff">5</span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">name</span>;
<span style="color:#ae81ff">6</span>    }
<span style="color:#ae81ff">7</span>
<span style="color:#ae81ff">8</span>    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span><span style="color:#ae81ff">9</span>    }
<span style="color:#ae81ff">10</span>
<span style="color:#ae81ff">11</span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Rabbit</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Animal</span> {
<span style="color:#ae81ff">12</span>
<span style="color:#ae81ff">13</span>    <span style="color:#a6e22e">constructor</span>(<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">earLength</span>) {
<span style="color:#ae81ff">14</span>        <span style="color:#66d9ef">super</span>(<span style="color:#a6e22e">name</span>);
<span style="color:#ae81ff">15</span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">earLength</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">earLength</span>;
<span style="color:#ae81ff">16</span>    }
<span style="color:#ae81ff">17</span>
<span style="color:#ae81ff">18</span>    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span><span style="color:#ae81ff">19</span>    }
<span style="color:#ae81ff">20</span>
<span style="color:#ae81ff">21</span>    <span style="color:#75715e">// now fine
</span><span style="color:#75715e"></span><span style="color:#ae81ff">22</span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">rabbit</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Rabbit</span>(<span style="color:#e6db74">&#34;White Rabbit&#34;</span>, <span style="color:#ae81ff">10</span>);
<span style="color:#ae81ff">23</span>    <span style="color:#a6e22e">alert</span>(<span style="color:#a6e22e">rabbit</span>.<span style="color:#a6e22e">name</span>); <span style="color:#75715e">// White Rabbit
</span><span style="color:#75715e"></span><span style="color:#ae81ff">24</span>    <span style="color:#a6e22e">alert</span>(<span style="color:#a6e22e">rabbit</span>.<span style="color:#a6e22e">earLength</span>); <span style="color:#75715e">// 10
</span></code></pre></div><h3 id="overriding-class-fields-a-tricky-note"><strong><a href="">Overriding class fields: a tricky note</a></strong></h3>
<blockquote>
<p>⚠️   <strong>Advanced note</strong></p>
</blockquote>
<pre><code>This note assumes you have a certain experience with classes, maybe in other programming languages.

It provides better insight into the language and also explains the behavior that might be a source of bugs (but not very often).

If you find it difficult to understand, just go on, continue reading, then return to it some time later.
</code></pre><p>We can override not only methods, but also class fields.</p>
<p>Although, there’s a tricky behavior when we access an overridden field in parent constructor, quite different from most other programming languages.</p>
<h4 id="consider-this-example">Consider this example:</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">
<span style="color:#ae81ff">1</span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Animal</span> {
<span style="color:#ae81ff">2</span>    <span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;animal&#39;</span>;
<span style="color:#ae81ff">3</span>
<span style="color:#ae81ff">4</span>    <span style="color:#a6e22e">constructor</span>() {
<span style="color:#ae81ff">5</span>        <span style="color:#a6e22e">alert</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span>); <span style="color:#75715e">// (*)
</span><span style="color:#75715e"></span><span style="color:#ae81ff">6</span>    }
<span style="color:#ae81ff">7</span>    }
<span style="color:#ae81ff">8</span>
<span style="color:#ae81ff">9</span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Rabbit</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Animal</span> {
<span style="color:#ae81ff">10</span>    <span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;rabbit&#39;</span>;
<span style="color:#ae81ff">11</span>    }
<span style="color:#ae81ff">12</span>
<span style="color:#ae81ff">13</span>    <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Animal</span>(); <span style="color:#75715e">// animal
</span><span style="color:#75715e"></span><span style="color:#ae81ff">14</span>    <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Rabbit</span>(); <span style="color:#75715e">// animal
</span></code></pre></div><p>Here, class <code>Rabbit</code> extends <code>Animal</code> and overrides<code>name</code>field with its own value.</p>
<p>There’s no own constructor in <code>Rabbit</code>, so <code>Animal</code> constructor is called.</p>
<p>What’s interesting is that in both cases: <code>new Animal()</code> and <code>new Rabbit()</code>, the <code>alert</code> in the line <code>(*) </code>shows <code>animal</code>.</p>
<p><strong>In other words, parent constructor always uses its own field value, not the overridden one.</strong></p>
<p>What’s odd about it?</p>
<p>If it’s not clear yet, please compare with methods.</p>
<p>Here’s the same code, but instead of<code> this.name</code> field we call <code>this.showName()</code> method:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">
<span style="color:#ae81ff">1</span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Animal</span> {
<span style="color:#ae81ff">2</span>    <span style="color:#a6e22e">showName</span>() {  <span style="color:#75715e">// instead of this.name = &#39;animal&#39;
</span><span style="color:#75715e"></span><span style="color:#ae81ff">3</span>        <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;animal&#39;</span>);
<span style="color:#ae81ff">4</span>    }
<span style="color:#ae81ff">5</span>
<span style="color:#ae81ff">6</span>    <span style="color:#a6e22e">constructor</span>() {
<span style="color:#ae81ff">7</span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">showName</span>(); <span style="color:#75715e">// instead of alert(this.name);
</span><span style="color:#75715e"></span><span style="color:#ae81ff">8</span>    }
<span style="color:#ae81ff">9</span>    }
<span style="color:#ae81ff">10</span>
<span style="color:#ae81ff">11</span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Rabbit</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Animal</span> {
<span style="color:#ae81ff">12</span>    <span style="color:#a6e22e">showName</span>() {
<span style="color:#ae81ff">13</span>        <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;rabbit&#39;</span>);
<span style="color:#ae81ff">14</span>    }
<span style="color:#ae81ff">15</span>    }
<span style="color:#ae81ff">16</span>
<span style="color:#ae81ff">17</span>    <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Animal</span>(); <span style="color:#75715e">// animal
</span><span style="color:#75715e"></span><span style="color:#ae81ff">18</span>    <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Rabbit</span>(); <span style="color:#75715e">// rabbit
</span></code></pre></div><p>Please note: now the output is different.</p>
<p>And that’s what we naturally expect. When the parent constructor is called in the derived class, it uses the overridden method.</p>
<p>…But for class fields it’s not so. As said, the parent constructor always uses the parent field.</p>
<p>Why is there the difference?</p>
<p>Well, the reason is in the field initialization order. The class field is initialized:</p>
<ul>
<li>Before constructor for the base class (that doesn’t extend anything),</li>
<li>Immediately after super() for the derived class.</li>
</ul>
<p>In our case, <code>Rabbit</code> is the derived class. There’s no <code>constructor()</code> in it. As said previously, that’s the same as if there was an empty constructor with only <code>super(...args)</code>.</p>
<p>So, new <code>Rabbit()</code> calls <code>super()</code>, thus executing the parent constructor, and (per the rule for derived classes) only after that its class fields are initialized. At the time of the parent constructor execution, there are no <code>Rabbit</code> class fields yet, that’s why <code>Animal</code> fields are used.</p>
<p>This subtle difference between fields and methods is specific to JavaScript</p>
<p>Luckily, this behavior only reveals itself if an overridden field is used in the parent constructor. Then it may be difficult to understand what’s going on, so we’re explaining it here.</p>
<p>If it becomes a problem, one can fix it by using methods or getters/setters instead of fields.</p>
<h3 id="super-internals-homeobject"><strong><a href="">Super: internals, [[HomeObject]]</a></strong></h3>
<blockquote>
<p><strong>⚠️  Advanced information</strong></p>
</blockquote>
<pre><code>If you’re reading the tutorial for the first time – this section may be skipped.

It’s about the internal mechanisms behind inheritance and` super`.
</code></pre><p>Let’s get a little deeper under the hood of<code> super</code>. We’ll see some interesting things along the way.</p>
<p>First to say, from all that we’ve learned till now, it’s impossible for <code>super </code>to work at all!</p>
<p>Yeah, indeed, let’s ask ourselves, how it should technically work? When an object method runs, it gets the current object as<code> this</code>. If we call <code>super.method()</code> then, the engine needs to get the <code>method</code> from the prototype of the current object. But how?</p>
<p>The task may seem simple, but it isn’t. The engine knows the current object <code>this</code>, so it could get the parent <code>method</code> as <code>this.__proto__</code>.method. Unfortunately, such a “naive” solution won’t work.</p>
<p>Let’s demonstrate the problem. Without classes, using plain objects for the sake of simplicity.</p>
<p>You may skip this part and go below to the <code>[[HomeObject]] </code>subsection if you don’t want to know the details. That won’t harm. Or read on if you’re interested in understanding things in-depth.</p>
<p>In the example below, <code>rabbit.__proto__ = animal</code>. Now let’s try: in <code>rabbit.eat()</code> we’ll call <code>animal.eat()</code>, using <code>this.__proto__</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">
<span style="color:#ae81ff">1</span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">animal</span> <span style="color:#f92672">=</span> {
<span style="color:#ae81ff">2</span>    <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Animal&#34;</span>,
<span style="color:#ae81ff">3</span>    <span style="color:#a6e22e">eat</span>() {
<span style="color:#ae81ff">4</span>        <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> eats.`</span>);
<span style="color:#ae81ff">5</span>    }
<span style="color:#ae81ff">6</span>    };
<span style="color:#ae81ff">7</span>
<span style="color:#ae81ff">8</span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">rabbit</span> <span style="color:#f92672">=</span> {
<span style="color:#ae81ff">9</span>    <span style="color:#ae81ff">__</span><span style="color:#a6e22e">proto__</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">animal</span>,
<span style="color:#ae81ff">10</span>    <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Rabbit&#34;</span>,
<span style="color:#ae81ff">11</span>    <span style="color:#a6e22e">eat</span>() {
<span style="color:#ae81ff">12</span>        <span style="color:#75715e">// that&#39;s how super.eat() could presumably work
</span><span style="color:#75715e"></span><span style="color:#ae81ff">13</span>        <span style="color:#66d9ef">this</span>.<span style="color:#ae81ff">__</span><span style="color:#a6e22e">proto__</span>.<span style="color:#a6e22e">eat</span>.<span style="color:#a6e22e">call</span>(<span style="color:#66d9ef">this</span>); <span style="color:#75715e">// (*)
</span><span style="color:#75715e"></span><span style="color:#ae81ff">14</span>    }
<span style="color:#ae81ff">15</span>    };
<span style="color:#ae81ff">16</span>
<span style="color:#ae81ff">17</span>     <span style="color:#a6e22e">rabbit</span>.<span style="color:#a6e22e">eat</span>(); <span style="color:#75715e">// Rabbit eats.
</span></code></pre></div><p>At the line <code>(*) </code>we take <code>eat</code> from the prototype<code> (animal)</code> and call it in the context of the current object. Please note that .<code>call(this)</code> is important here, because a simple <code>this.__proto__.eat() </code>would execute parent <code>eat</code> in the context of the prototype, not the current object.</p>
<p>And in the code above it actually works as intended: we have the correct <code>alert</code>.</p>
<p>Now let’s add one more object to the chain. We’ll see how things break:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">
<span style="color:#ae81ff">1</span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">animal</span> <span style="color:#f92672">=</span> {
<span style="color:#ae81ff">2</span>    <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Animal&#34;</span>,
<span style="color:#ae81ff">3</span>    <span style="color:#a6e22e">eat</span>() {
<span style="color:#ae81ff">4</span>        <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> eats.`</span>);
<span style="color:#ae81ff">5</span>    }
<span style="color:#ae81ff">6</span>    };
<span style="color:#ae81ff">7</span>
<span style="color:#ae81ff">8</span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">rabbit</span> <span style="color:#f92672">=</span> {
<span style="color:#ae81ff">9</span>    <span style="color:#ae81ff">__</span><span style="color:#a6e22e">proto__</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">animal</span>,
<span style="color:#ae81ff">10</span>    <span style="color:#a6e22e">eat</span>() {
<span style="color:#ae81ff">11</span>        <span style="color:#75715e">// ...bounce around rabbit-style and call parent (animal) method
</span><span style="color:#75715e"></span><span style="color:#ae81ff">12</span>        <span style="color:#66d9ef">this</span>.<span style="color:#ae81ff">__</span><span style="color:#a6e22e">proto__</span>.<span style="color:#a6e22e">eat</span>.<span style="color:#a6e22e">call</span>(<span style="color:#66d9ef">this</span>); <span style="color:#75715e">// (*)
</span><span style="color:#75715e"></span><span style="color:#ae81ff">13</span>    }
<span style="color:#ae81ff">14</span>    };
<span style="color:#ae81ff">15</span>
<span style="color:#ae81ff">16</span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">longEar</span> <span style="color:#f92672">=</span> {
<span style="color:#ae81ff">17</span>    <span style="color:#ae81ff">__</span><span style="color:#a6e22e">proto__</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">rabbit</span>,
<span style="color:#ae81ff">18</span>    <span style="color:#a6e22e">eat</span>() {
<span style="color:#ae81ff">19</span>        <span style="color:#75715e">// ...do something with long ears and call parent (rabbit) method
</span><span style="color:#75715e"></span><span style="color:#ae81ff">20</span>        <span style="color:#66d9ef">this</span>.<span style="color:#ae81ff">__</span><span style="color:#a6e22e">proto__</span>.<span style="color:#a6e22e">eat</span>.<span style="color:#a6e22e">call</span>(<span style="color:#66d9ef">this</span>); <span style="color:#75715e">// (**)
</span><span style="color:#75715e"></span><span style="color:#ae81ff">21</span>    }
<span style="color:#ae81ff">22</span>    };
<span style="color:#ae81ff">23</span>
<span style="color:#ae81ff">24</span>    <span style="color:#a6e22e">longEar</span>.<span style="color:#a6e22e">eat</span>(); <span style="color:#75715e">// Error: Maximum call stack size exceeded
</span></code></pre></div><p>The code doesn’t work anymore! We can see the error trying to call <code>longEar.eat()</code>.</p>
<p>It may be not that obvious, but if we trace <code>longEar.eat()</code> call, then we can see why. In both lines <code>(*) </code>and <code>(**) </code>the value of <code>this </code>is the current object <code>(longEar)</code>. That’s essential: all object methods get the current object as<code> this</code>, not a prototype or something.</p>
<p>So, in both lines<code> (*)</code> and<code> (**)</code> the value of<code> this.__proto__</code> is exactly the same: <code>rabbit</code>. They both call <code>rabbit.eat</code> without going up the chain in the endless loop.</p>
<h4 id="heres-the-picture-of-what-happens">Here’s the picture of what happens:</h4>
<hr>
<p>flow chaart</p>
<hr>
<p>1.Inside <code>longEar.eat()</code>, the line <code>(**)</code> calls <code>rabbit.eat</code> providing it with <code>this=longEar</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">
<span style="color:#ae81ff">1</span>    <span style="color:#75715e">// inside longEar.eat() we have this = longEar
</span><span style="color:#75715e"></span><span style="color:#ae81ff">2</span>    <span style="color:#66d9ef">this</span>.<span style="color:#ae81ff">__</span><span style="color:#a6e22e">proto__</span>.<span style="color:#a6e22e">eat</span>.<span style="color:#a6e22e">call</span>(<span style="color:#66d9ef">this</span>) <span style="color:#75715e">// (**)
</span><span style="color:#75715e"></span><span style="color:#ae81ff">3</span>    <span style="color:#75715e">// becomes
</span><span style="color:#75715e"></span><span style="color:#ae81ff">4</span>    <span style="color:#a6e22e">longEar</span>.<span style="color:#ae81ff">__</span><span style="color:#a6e22e">proto__</span>.<span style="color:#a6e22e">eat</span>.<span style="color:#a6e22e">call</span>(<span style="color:#66d9ef">this</span>)
<span style="color:#ae81ff">5</span>    <span style="color:#75715e">// that is
</span><span style="color:#75715e"></span><span style="color:#ae81ff">6</span>    <span style="color:#a6e22e">rabbit</span>.<span style="color:#a6e22e">eat</span>.<span style="color:#a6e22e">call</span>(<span style="color:#66d9ef">this</span>);
</code></pre></div><p>2.Then in the line <code>(*)</code> of<code> rabbit.eat</code>, we’d like to pass the call even higher in the chain, but <code>this=longEar</code>, so <code>this.__proto__.eat</code> is again <code>rabbit.eat</code>!</p>
<p>3.…So rabbit.eat calls itself in the endless loop, because it can’t ascend any further.</p>
<p>The problem can’t be solved by using this alone.</p>
<h3 id="homeobject"><strong><a href="">[[HomeObject]]</a></strong></h3>
<p>To provide the solution, JavaScript adds one more special internal property for functions: <code>[[HomeObject]]</code>.</p>
<p>When a function is specified as a class or object method, its <code>[[HomeObject]]</code> property becomes that object.</p>
<p>Then <code>super</code> uses it to resolve the parent prototype and its methods.</p>
<p>Let’s see how it works, first with plain objects:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">
<span style="color:#ae81ff">1</span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">animal</span> <span style="color:#f92672">=</span> {
<span style="color:#ae81ff">2</span>    <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Animal&#34;</span>,
<span style="color:#ae81ff">3</span>    <span style="color:#a6e22e">eat</span>() {         <span style="color:#75715e">// animal.eat.[[HomeObject]] == animal
</span><span style="color:#75715e"></span><span style="color:#ae81ff">4</span>        <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> eats.`</span>);
<span style="color:#ae81ff">5</span>    }
<span style="color:#ae81ff">6</span>    };
<span style="color:#ae81ff">7</span>
<span style="color:#ae81ff">8</span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">rabbit</span> <span style="color:#f92672">=</span> {
<span style="color:#ae81ff">9</span>    <span style="color:#ae81ff">__</span><span style="color:#a6e22e">proto__</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">animal</span>,
<span style="color:#ae81ff">10</span>    <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Rabbit&#34;</span>,
<span style="color:#ae81ff">11</span>    <span style="color:#a6e22e">eat</span>() {         <span style="color:#75715e">// rabbit.eat.[[HomeObject]] == rabbit
</span><span style="color:#75715e"></span><span style="color:#ae81ff">12</span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">eat</span>();
<span style="color:#ae81ff">13</span>    }
<span style="color:#ae81ff">14</span>    };
<span style="color:#ae81ff">15</span>
<span style="color:#ae81ff">16</span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">longEar</span> <span style="color:#f92672">=</span> {
<span style="color:#ae81ff">17</span>    <span style="color:#ae81ff">__</span><span style="color:#a6e22e">proto__</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">rabbit</span>,
<span style="color:#ae81ff">18</span>    <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Long Ear&#34;</span>,
<span style="color:#ae81ff">19</span>    <span style="color:#a6e22e">eat</span>() {         <span style="color:#75715e">// longEar.eat.[[HomeObject]] == longEar
</span><span style="color:#75715e"></span><span style="color:#ae81ff">20</span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">eat</span>();
<span style="color:#ae81ff">21</span>    }
<span style="color:#ae81ff">22</span>    };
<span style="color:#ae81ff">23</span>
<span style="color:#ae81ff">24</span>    <span style="color:#75715e">// works correctly
</span><span style="color:#75715e"></span><span style="color:#ae81ff">25</span>    <span style="color:#a6e22e">longEar</span>.<span style="color:#a6e22e">eat</span>();  <span style="color:#75715e">// Long Ear eats.
</span></code></pre></div><p>It works as intended, due to<code> [[HomeObject]]</code> mechanics. A method, such as <code>longEar.eat</code>, knows its<code>[[HomeObject]]</code>and takes the parent method from its prototype. Without any use of <code>this</code>.</p>
<h3 id="methods-are-not-free"><strong><a href="">Methods are not “free”</a></strong></h3>
<p>As we’ve known before, generally functions are “free”, not bound to objects in JavaScript. So they can be copied between objects and called with another <code>this</code>.</p>
<p>The very existence of <code>[[HomeObject]]</code> violates that principle, because methods remember their objects.<code> [[HomeObject]]</code> can’t be changed, so this bond is forever.</p>
<p>The only place in the language where<code> [[HomeObject]]</code> is used – is <code>super</code>. So, if a method does not use <code>super</code>, then we can still consider it free and copy between objects. But with <code>super</code> things may go wrong.</p>
<p>Here’s the demo of a wrong <code>super</code> result after copying:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">
<span style="color:#ae81ff">1</span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">animal</span> <span style="color:#f92672">=</span> {
<span style="color:#ae81ff">2</span>    <span style="color:#a6e22e">sayHi</span>() {
<span style="color:#ae81ff">3</span>        <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">`I&#39;m an animal`</span>);
<span style="color:#ae81ff">4</span>    }
<span style="color:#ae81ff">5</span>    };
<span style="color:#ae81ff">6</span>
<span style="color:#ae81ff">7</span>    <span style="color:#75715e">// rabbit inherits from animal
</span><span style="color:#75715e"></span><span style="color:#ae81ff">8</span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">rabbit</span> <span style="color:#f92672">=</span> {
<span style="color:#ae81ff">9</span>    <span style="color:#ae81ff">__</span><span style="color:#a6e22e">proto__</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">animal</span>,
<span style="color:#ae81ff">10</span>    <span style="color:#a6e22e">sayHi</span>() {
<span style="color:#ae81ff">11</span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">sayHi</span>();
<span style="color:#ae81ff">12</span>    }
<span style="color:#ae81ff">13</span>    };
<span style="color:#ae81ff">14</span>
<span style="color:#ae81ff">15</span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">plant</span> <span style="color:#f92672">=</span> {
<span style="color:#ae81ff">16</span>    <span style="color:#a6e22e">sayHi</span>() {
<span style="color:#ae81ff">17</span>        <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#34;I&#39;m a plant&#34;</span>);
<span style="color:#ae81ff">18</span>    }
<span style="color:#ae81ff">19</span>    };
<span style="color:#ae81ff">20</span>
<span style="color:#ae81ff">21</span>    <span style="color:#75715e">// tree inherits from plant
</span><span style="color:#75715e"></span><span style="color:#ae81ff">22</span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">tree</span> <span style="color:#f92672">=</span> {
<span style="color:#ae81ff">23</span>    <span style="color:#ae81ff">__</span><span style="color:#a6e22e">proto__</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">plant</span>,
<span style="color:#ae81ff">24</span>    <span style="color:#a6e22e">sayHi</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">rabbit</span>.<span style="color:#a6e22e">sayHi</span> <span style="color:#75715e">// (*)
</span><span style="color:#75715e"></span><span style="color:#ae81ff">25</span>    };
<span style="color:#ae81ff">26</span>
<span style="color:#ae81ff">27</span>    <span style="color:#a6e22e">tree</span>.<span style="color:#a6e22e">sayHi</span>();  <span style="color:#75715e">// I&#39;m an animal (?!?)
</span></code></pre></div><p>A call to <code>tree.sayHi()</code> shows “I’m an animal”. Definitely wrong.</p>
<p>The reason is simple:</p>
<ul>
<li>In the line <code>(*)</code>, the method <code>tree.sayHi</code> was copied from <code>rabbit</code>. Maybe we just wanted to avoid code duplication?</li>
<li>Its <code>[[HomeObject]]</code> is <code>rabbit</code>, as it was created in <code>rabbit</code>. There’s no way to change <code>[[HomeObject]]</code>.</li>
<li>The code of <code>tree.sayHi()</code> has <code>super.sayHi()</code> inside. It goes up from <code>rabbit</code> and takes the method from<code> animal</code>.</li>
</ul>
<p>Here’s the diagram of what happens:</p>
<hr>
<p>flow chart</p>
<hr>
<h3 id="methods-not-function-properties"><strong><a href="">Methods, not function properties</a></strong></h3>
<p>is defined for methods both in classes and in plain objects. But for objects, methods must be specified exactly as<code> method()</code>, not as<code> &quot;method: function()&quot;</code>.</p>
<p>The difference may be non-essential for us, but it’s important for JavaScript.</p>
<p>In the example below a non-method syntax is used for comparison. <code>[[HomeObject]]</code> property is not set and the inheritance doesn’t work:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">
<span style="color:#ae81ff">1</span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">animal</span> <span style="color:#f92672">=</span> {
<span style="color:#ae81ff">2</span>    <span style="color:#a6e22e">eat</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>() { <span style="color:#75715e">// intentionally writing like this instead of eat() {...
</span><span style="color:#75715e"></span><span style="color:#ae81ff">3</span>        <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span><span style="color:#ae81ff">4</span>    }
<span style="color:#ae81ff">5</span>    };
<span style="color:#ae81ff">6</span>
<span style="color:#ae81ff">7</span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">rabbit</span> <span style="color:#f92672">=</span> {
<span style="color:#ae81ff">8</span>    <span style="color:#ae81ff">__</span><span style="color:#a6e22e">proto__</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">animal</span>,
<span style="color:#ae81ff">9</span>    <span style="color:#a6e22e">eat</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>() {
<span style="color:#ae81ff">10</span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">eat</span>();
<span style="color:#ae81ff">11</span>    }
<span style="color:#ae81ff">12</span>    };
<span style="color:#ae81ff">13</span>
<span style="color:#ae81ff">14</span>    <span style="color:#a6e22e">rabbit</span>.<span style="color:#a6e22e">eat</span>();  <span style="color:#75715e">// Error calling super (because there&#39;s no [[HomeObject]])
</span></code></pre></div><h3 id="summary"><strong><a href="">Summary</a></strong></h3>
<p>1.To extend a class: <code>class Child extends Parent</code>:</p>
<ul>
<li>That means <code>Child.prototype.__proto__</code> will be <code>Parent.prototype</code>, so methods are inherited.</li>
</ul>
<p>2.When overriding a constructor:</p>
<ul>
<li>We must call parent constructor as<code> super()</code> in <code>Child</code> constructor before using <code>this</code>.</li>
</ul>
<p>3.When overriding another method:
We can use <code>super.method()</code> in a <code>Child </code>method to call <code>Parent</code> method.</p>
<p>4.Internals:</p>
<ul>
<li>
<p>Methods remember their class/object in the internal <code>[[HomeObject]] </code>property. That’s how super resolves parent methods.</p>
</li>
<li>
<p>So it’s not safe to copy a method with <code>super </code>from one object to another.</p>
</li>
</ul>
<p>Also:</p>
<ul>
<li>Arrow functions don’t have their own <code>this </code>or <code>super</code>, so they transparently fit into the surrounding context.</li>
</ul>
<h3 id="-tasks"><strong>✅ Tasks</strong></h3>
<hr>
<h3 id="error-creating-an-instance---"><strong><a href="">Error creating an instance</a>   <a href="">↗️</a></strong></h3>
<p><code>importance: 5</code></p>
<p>Here’s the code with<code> Rabbit</code> extending <code>Animal</code>.</p>
<p>Unfortunately,<code> Rabbit</code> objects can’t be created. What’s wrong? Fix it.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">
<span style="color:#ae81ff">1</span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Animal</span> {
<span style="color:#ae81ff">2</span>
<span style="color:#ae81ff">3</span>    <span style="color:#a6e22e">constructor</span>(<span style="color:#a6e22e">name</span>) {
<span style="color:#ae81ff">4</span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">name</span>;
<span style="color:#ae81ff">5</span>    }
<span style="color:#ae81ff">6</span>
<span style="color:#ae81ff">7</span>    }
<span style="color:#ae81ff">8</span>
<span style="color:#ae81ff">9</span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Rabbit</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Animal</span> {
<span style="color:#ae81ff">10</span>    <span style="color:#a6e22e">constructor</span>(<span style="color:#a6e22e">name</span>) {
<span style="color:#ae81ff">11</span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">name</span>;
<span style="color:#ae81ff">12</span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">created</span> <span style="color:#f92672">=</span> Date.<span style="color:#a6e22e">now</span>();
<span style="color:#ae81ff">13</span>    }
<span style="color:#ae81ff">14</span>    }
<span style="color:#ae81ff">15</span>
<span style="color:#ae81ff">16</span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">rabbit</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Rabbit</span>(<span style="color:#e6db74">&#34;White Rabbit&#34;</span>); <span style="color:#75715e">// Error: this is not defined
</span><span style="color:#75715e"></span><span style="color:#ae81ff">17</span>    <span style="color:#a6e22e">alert</span>(<span style="color:#a6e22e">rabbit</span>.<span style="color:#a6e22e">name</span>);
</code></pre></div><p><strong><a href="">Solution</a></strong></p>
<h3 id="extended-clock---"><strong><a href="">Extended clock</a>   <a href="">↗️</a></strong></h3>
<p><code>importance: 5</code></p>
<p>We’ve got a<code> Clock</code> class. As of now, it prints the time every second.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Clock</span> {
  <span style="color:#a6e22e">constructor</span>({ <span style="color:#a6e22e">template</span> }) {
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">template</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">template</span>;
  }

  <span style="color:#a6e22e">render</span>() {
    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">date</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Date();

    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">hours</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">date</span>.<span style="color:#a6e22e">getHours</span>();
    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">hours</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">10</span>) <span style="color:#a6e22e">hours</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;0&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">hours</span>;

    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">mins</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">date</span>.<span style="color:#a6e22e">getMinutes</span>();
    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">mins</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">10</span>) <span style="color:#a6e22e">mins</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;0&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">mins</span>;

    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">secs</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">date</span>.<span style="color:#a6e22e">getSeconds</span>();
    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">secs</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">10</span>) <span style="color:#a6e22e">secs</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;0&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">secs</span>;

    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">output</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">template</span>
      .<span style="color:#a6e22e">replace</span>(<span style="color:#e6db74">&#39;h&#39;</span>, <span style="color:#a6e22e">hours</span>)
      .<span style="color:#a6e22e">replace</span>(<span style="color:#e6db74">&#39;m&#39;</span>, <span style="color:#a6e22e">mins</span>)
      .<span style="color:#a6e22e">replace</span>(<span style="color:#e6db74">&#39;s&#39;</span>, <span style="color:#a6e22e">secs</span>);

    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">output</span>);
  }

  <span style="color:#a6e22e">stop</span>() {
    <span style="color:#a6e22e">clearInterval</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">timer</span>);
  }

  <span style="color:#a6e22e">start</span>() {
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">render</span>();
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">timer</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">setInterval</span>(() =&gt; <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">render</span>(), <span style="color:#ae81ff">1000</span>);
  }
}
</code></pre></div><p>Create a new class <code>ExtendedClock</code> that inherits from <code>Clock</code> and adds the parameter <code>precision </code>– the number of<code> ms</code> between “ticks”. Should be <code>1000 </code>(1 second) by default.</p>
<ul>
<li>Your code should be in the file<code> extended-clock.js</code></li>
<li>Don’t modify the original<code> clock.js</code>. Extend it.</li>
</ul>
<h4 id="open-a-sandbox-for-the-task"><a href="">Open a sandbox for the task.</a></h4>
<h4 id="solution"><a href="">solution</a></h4>
</main>


<div class="modal fade" id="noteModel" tabindex="-1" aria-labelledby="noteModelLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="noteModelLabel">Note</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="mb-3">
          <textarea class="form-control" id="noteText" rows="3"></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>


    </div>
    
  </main>
  
  



<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Confimation</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          Are you sure you want to delete ?
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No</button>
          <button type="button" class="btn btn-primary">Yes</button>
        </div>
      </div>
    </div>
  </div>

<div aria-live="polite" aria-atomic="true">
  <div class="toast-container position-absolute top-0 start-0 p-5 mt-5" id="toast-container">
    
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>
<script type="text/javascript" src="/js/app.js"></script>



  
  
  

<script type="text/javascript" src="/js/chapter.js"></script>


  
</body>

</html>