<!DOCTYPE html>
<html lang="en">

<head>


  <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <base href="/">
    <title>Project Madurai School</title>

    
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/images/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/images/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/images/favicon-16x16.png"
    />
    <link rel="manifest" href="/images/site.webmanifest" />

    
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />


    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css"
      integrity="sha256-h20CPZ0QyXlBuAw7A+KluUYx/3pK+c7lYEpqLTlxjYQ="
      crossorigin="anonymous"
    />



  


</head>

<body>
  <main class="container mt-5 w-100 h-100">
    <nav class="navbar navbar-expand-md navbar-light bg-white py-0 fixed-top">
  <div class="container-fluid border-bottom border-top-1 shadow-sm bg-body">
    <a class="navbar-brand lh-1" href="/">
      
      
        <span class="text-primary"><strong>Project Madurai</strong></span><br>
        <p class="text-muted text-end w-100 p-0 mb-0"><small class="dropdown-toggle">தமிழ்</small></p>
      </a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsExampleDefault"
      aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarsExampleDefault">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link active" href="/books/javascript">Javascript</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="/books/c">C</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="/practices/java">Java</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="/posts">Blog</a>
        </li>
      </ul>
      <form class="d-flex">
        <input class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>
      <ul class="navbar-nav secured">
        <li class="nav-item btn pe-0">
          <a class="nav-link" href="/chat"><i class="far fa-comment-dots fa-2x"></i></a>
        </li>
        <li class="nav-item pe-0 dropdown">
          
          <div class="btn-group bg-light">
            <a class="btn btn-toggle pe-0" data-bs-toggle="dropdown" aria-expanded="false">
              <div class="d-flex bd-highlight">
                <div class="w-100 bd-highlight text-end">
                  <h6 class="text-muted fw-bold">தமிழ்ச் சங்கம்</h6>
                  <small class="text-muted">திருவள்ளுவர் கழகம்</small>
               </div>
                <div class="flex-shrink-1 bd-highlight">
                  <img src="http://ssl.gstatic.com/accounts/ui/avatar_2x.png" class="img-circle img-thumbnail avatar"
                style="vertical-align: middle;border-radius: 50%; width: 3rem; margin-right: 10px;" alt="avatar">
                </div>
                
                
              </div>
            </a>
            <ul class="dropdown-menu" aria-labelledby="dropdown03">
              <li><a class="dropdown-item" href="javascript://">Profile</a></li>
              <li><a class="dropdown-item" href="/campuses/tamil-sangam">Campus</a></li>
              <li><a class="dropdown-item logout" href="javascript://">Logout</a></li>
            </ul>
          </div>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div class="row py-5 w-100 h-100">
       

  <nav class="navbar border-1 border-bottom">
  <div class="row w-100">
    <div class="col-4">
      <a href="/books/javascript/prototypes-inheritance/function-prototype">F.prototype</a>
    </div>
    <div class="col-4 mb-2 text-center">
      <a class="text-dark"
        href="/books/javascript/prototypes-inheritance">Prototypes, inheritance</a>
    </div>
    <div class="col-4 d-flex justify-content-end align-items-center">
      <a href="/books/javascript/prototypes-inheritance/prototypemethods">Prototype methods, objects without __proto__</a>
    </div>
  </div>
</nav>

<main id="content" class="pt-3"><h1 id="native-prototypes">Native prototypes</h1>
<p>The <code>&quot;prototype&quot;</code> property is widely used by the core of JavaScript itself. All built-in constructor functions use it.</p>
<p>First we&rsquo;ll see at the details, and then how to use it for adding new capabilities to built-in objects.</p>
<h2 id="objectprototype">Object.prototype</h2>
<p>Let&rsquo;s say we output an empty object:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">obj</span> <span style="color:#f92672">=</span> {};
<span style="color:#a6e22e">alert</span>( <span style="color:#a6e22e">obj</span> ); <span style="color:#75715e">// &#34;[object Object]&#34; ?
</span></code></pre></div><p>Where&rsquo;s the code that generates the string <code>&quot;[object Object]&quot;</code>? That&rsquo;s a built-in <code>toString</code> method, but where is it? The <code>obj</code> is empty!</p>
<p>&hellip;But the short notation <code>obj = {}</code> is the same as <code>obj = new Object()</code>, where <code>Object</code> is a built-in object constructor function, with its own <code>prototype</code> referencing a huge object with <code>toString</code> and other methods.</p>
<p>Here&rsquo;s what&rsquo;s going on:</p>
<p><img src="https://raw.githubusercontent.com/javascript-tutorial/en.javascript.info/cf33b67042d72df14e41f6688695ef833467f7f7/1-js/08-prototypes/03-native-prototypes/object-prototype.svg" alt=""></p>
<p>When <code>new Object()</code> is called (or a literal object <code>{...}</code> is created), the <code>[[Prototype]]</code> of it is set to <code>Object.prototype</code> according to the rule that we discussed in the previous chapter:</p>
<p><img src="https://raw.githubusercontent.com/javascript-tutorial/en.javascript.info/cf33b67042d72df14e41f6688695ef833467f7f7/1-js/08-prototypes/03-native-prototypes/object-prototype-1.svg" alt=""></p>
<p>So then when <code>obj.toString()</code> is called the method is taken from <code>Object.prototype</code>.</p>
<p>We can check it like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">obj</span> <span style="color:#f92672">=</span> {};

<span style="color:#a6e22e">alert</span>(<span style="color:#a6e22e">obj</span>.<span style="color:#ae81ff">__</span><span style="color:#a6e22e">proto__</span> <span style="color:#f92672">===</span> Object.<span style="color:#a6e22e">prototype</span>); <span style="color:#75715e">// true
</span><span style="color:#75715e"></span>
<span style="color:#a6e22e">alert</span>(<span style="color:#a6e22e">obj</span>.<span style="color:#a6e22e">toString</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">obj</span>.<span style="color:#ae81ff">__</span><span style="color:#a6e22e">proto__</span>.<span style="color:#a6e22e">toString</span>); <span style="color:#75715e">//true
</span><span style="color:#75715e"></span><span style="color:#a6e22e">alert</span>(<span style="color:#a6e22e">obj</span>.<span style="color:#a6e22e">toString</span> <span style="color:#f92672">===</span> Object.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">toString</span>); <span style="color:#75715e">//true
</span></code></pre></div><p>Please note that there is no more <code>[[Prototype]]</code> in the chain above <code>Object.prototype</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">alert</span>(Object.<span style="color:#a6e22e">prototype</span>.<span style="color:#ae81ff">__</span><span style="color:#a6e22e">proto__</span>); <span style="color:#75715e">// null
</span></code></pre></div><h2 id="other-built-in-prototypes">Other built-in prototypes</h2>
<p>Other built-in objects such as <code>Array</code>, <code>Date</code>, <code>Function</code> and others also keep methods in prototypes.</p>
<p>For instance, when we create an array <code>[1, 2, 3]</code>, the default <code>new Array()</code> constructor is used internally. So <code>Array.prototype</code> becomes its prototype and provides methods. That&rsquo;s very memory-efficient.</p>
<p>By specification, all of the built-in prototypes have <code>Object.prototype</code> on the top. That&rsquo;s why some people say that &ldquo;everything inherits from objects&rdquo;.</p>
<p>Here&rsquo;s the overall picture (for 3 built-ins to fit):</p>
<p><img src="https://raw.githubusercontent.com/javascript-tutorial/en.javascript.info/cf33b67042d72df14e41f6688695ef833467f7f7/1-js/08-prototypes/03-native-prototypes/native-prototypes-classes.svg" alt=""></p>
<p>Let&rsquo;s check the prototypes manually:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">arr</span> <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>];

<span style="color:#75715e">// it inherits from Array.prototype?
</span><span style="color:#75715e"></span><span style="color:#a6e22e">alert</span>( <span style="color:#a6e22e">arr</span>.<span style="color:#ae81ff">__</span><span style="color:#a6e22e">proto__</span> <span style="color:#f92672">===</span> Array.<span style="color:#a6e22e">prototype</span> ); <span style="color:#75715e">// true
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// then from Object.prototype?
</span><span style="color:#75715e"></span><span style="color:#a6e22e">alert</span>( <span style="color:#a6e22e">arr</span>.<span style="color:#ae81ff">__</span><span style="color:#a6e22e">proto__</span>.<span style="color:#ae81ff">__</span><span style="color:#a6e22e">proto__</span> <span style="color:#f92672">===</span> Object.<span style="color:#a6e22e">prototype</span> ); <span style="color:#75715e">// true
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// and null on the top.
</span><span style="color:#75715e"></span><span style="color:#a6e22e">alert</span>( <span style="color:#a6e22e">arr</span>.<span style="color:#ae81ff">__</span><span style="color:#a6e22e">proto__</span>.<span style="color:#ae81ff">__</span><span style="color:#a6e22e">proto__</span>.<span style="color:#ae81ff">__</span><span style="color:#a6e22e">proto__</span> ); <span style="color:#75715e">// null
</span></code></pre></div><p>Some methods in prototypes may overlap, for instance, <code>Array.prototype</code> has its own <code>toString</code> that lists comma-delimited elements:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">arr</span> <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>]
<span style="color:#a6e22e">alert</span>(<span style="color:#a6e22e">arr</span>); <span style="color:#75715e">// 1,2,3 &lt;-- the result of Array.prototype.toString
</span></code></pre></div><p>As we&rsquo;ve seen before, <code>Object.prototype</code> has <code>toString</code> as well, but <code>Array.prototype</code> is closer in the chain, so the array variant is used.</p>
<p><img src="https://raw.githubusercontent.com/javascript-tutorial/en.javascript.info/cf33b67042d72df14e41f6688695ef833467f7f7/1-js/08-prototypes/03-native-prototypes/native-prototypes-array-tostring.svg" alt=""></p>
<p>In-browser tools like Chrome developer console also show inheritance (<code>console.dir</code> may need to be used for built-in objects):</p>
<p><img src="console_dir_array.png" alt=""></p>
<p>Other built-in objects also work the same way. Even functions &ndash; they are objects of a built-in <code>Function</code> constructor, and their methods (<code>call</code>/<code>apply</code> and others) are taken from <code>Function.prototype</code>. Functions have their own <code>toString</code> too.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">f</span>() {}

<span style="color:#a6e22e">alert</span>(<span style="color:#a6e22e">f</span>.<span style="color:#ae81ff">__</span><span style="color:#a6e22e">proto__</span> <span style="color:#f92672">==</span> Function.<span style="color:#a6e22e">prototype</span>); <span style="color:#75715e">// true
</span><span style="color:#75715e"></span><span style="color:#a6e22e">alert</span>(<span style="color:#a6e22e">f</span>.<span style="color:#ae81ff">__</span><span style="color:#a6e22e">proto__</span>.<span style="color:#ae81ff">__</span><span style="color:#a6e22e">proto__</span> <span style="color:#f92672">==</span> Object.<span style="color:#a6e22e">prototype</span>); <span style="color:#75715e">// true, inherit from objects
</span></code></pre></div><h2 id="primitives">Primitives</h2>
<p>The most intricate thing happens with strings, numbers and booleans.</p>
<p>As we remember, they are not objects. But if we try to access their properties, temporary wrapper objects are created using built-in constructors <code>String</code>, <code>Number</code> and <code>Boolean</code>. They provide the methods and disappear.</p>
<p>These objects are created invisibly to us and most engines optimize them out, but the specification describes it exactly this way. Methods of these objects also reside in prototypes, available as <code>String.prototype</code>, <code>Number.prototype</code> and <code>Boolean.prototype</code>.</p>
<p>```warn header=&ldquo;Values <code>null</code> and <code>undefined</code> have no object wrappers&rdquo;
Special values <code>null</code> and <code>undefined</code> stand apart. They have no object wrappers, so methods and properties are not available for them. And there are no corresponding prototypes either.</p>
<pre><code>
## Changing native prototypes [#native-prototype-change]

Native prototypes can be modified. For instance, if we add a method to `String.prototype`,  it becomes available to all strings:

```js run
String.prototype.show = function() {
  alert(this);
};

&quot;BOOM!&quot;.show(); // BOOM!
</code></pre><p>During the process of development, we may have ideas for new built-in methods we&rsquo;d like to have, and we may be tempted to add them to native prototypes. But that is generally a bad idea.</p>
<pre><code class="language-warn" data-lang="warn">Prototypes are global, so it's easy to get a conflict. If two libraries add a method `String.prototype.show`, then one of them will be overwriting the method of the other.

So, generally, modifying a native prototype is considered a bad idea.
</code></pre><p><strong>In modern programming, there is only one case where modifying native prototypes is approved. That&rsquo;s polyfilling.</strong></p>
<p>Polyfilling is a term for making a substitute for a method that exists in the JavaScript specification, but is not yet supported by a particular JavaScript engine.</p>
<p>We may then implement it manually and populate the built-in prototype with it.</p>
<p>For instance:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>String.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">repeat</span>) { <span style="color:#75715e">// if there&#39;s no such method
</span><span style="color:#75715e"></span>  <span style="color:#75715e">// add it to the prototype
</span><span style="color:#75715e"></span>
  String.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">repeat</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">n</span>) {
    <span style="color:#75715e">// repeat the string n times
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// actually, the code should be a little bit more complex than that
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// (the full algorithm is in the specification)
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// but even an imperfect polyfill is often considered good enough
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Array(<span style="color:#a6e22e">n</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>).<span style="color:#a6e22e">join</span>(<span style="color:#66d9ef">this</span>);
  };
}

<span style="color:#a6e22e">alert</span>( <span style="color:#e6db74">&#34;La&#34;</span>.<span style="color:#a6e22e">repeat</span>(<span style="color:#ae81ff">3</span>) ); <span style="color:#75715e">// LaLaLa
</span></code></pre></div><h2 id="borrowing-from-prototypes">Borrowing from prototypes</h2>
<p>In the chapter <a href="info:call-apply-decorators#method-borrowing">info:call-apply-decorators#method-borrowing</a> we talked about method borrowing.</p>
<p>That&rsquo;s when we take a method from one object and copy it into another.</p>
<p>Some methods of native prototypes are often borrowed.</p>
<p>For instance, if we&rsquo;re making an array-like object, we may want to copy some <code>Array</code> methods to it.</p>
<p>E.g.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">obj</span> <span style="color:#f92672">=</span> {
  <span style="color:#ae81ff">0</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Hello&#34;</span>,
  <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;world!&#34;</span>,
  <span style="color:#a6e22e">length</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span>,
};

<span style="color:#f92672">*!*</span>
<span style="color:#a6e22e">obj</span>.<span style="color:#a6e22e">join</span> <span style="color:#f92672">=</span> Array.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">join</span>;
<span style="color:#f92672">*</span><span style="color:#960050;background-color:#1e0010">/!*</span>

<span style="color:#a6e22e">alert</span>( <span style="color:#a6e22e">obj</span>.<span style="color:#a6e22e">join</span>(<span style="color:#e6db74">&#39;,&#39;</span>) ); <span style="color:#75715e">// Hello,world!
</span></code></pre></div><p>It works because the internal algorithm of the built-in <code>join</code> method only cares about the correct indexes and the <code>length</code> property. It doesn&rsquo;t check if the object is indeed an array. Many built-in methods are like that.</p>
<p>Another possibility is to inherit by setting <code>obj.__proto__</code> to <code>Array.prototype</code>, so all <code>Array</code> methods are automatically available in <code>obj</code>.</p>
<p>But that&rsquo;s impossible if <code>obj</code> already inherits from another object. Remember, we only can inherit from one object at a time.</p>
<p>Borrowing methods is flexible, it allows to mix functionalities from different objects if needed.</p>
<h2 id="summary">Summary</h2>
<ul>
<li>All built-in objects follow the same pattern:
<ul>
<li>The methods are stored in the prototype (<code>Array.prototype</code>, <code>Object.prototype</code>, <code>Date.prototype</code>, etc.)</li>
<li>The object itself stores only the data (array items, object properties, the date)</li>
</ul>
</li>
<li>Primitives also store methods in prototypes of wrapper objects: <code>Number.prototype</code>, <code>String.prototype</code> and <code>Boolean.prototype</code>. Only <code>undefined</code> and <code>null</code> do not have wrapper objects</li>
<li>Built-in prototypes can be modified or populated with new methods. But it&rsquo;s not recommended to change them. The only allowable case is probably when we add-in a new standard, but it&rsquo;s not yet supported by the JavaScript engine</li>
</ul>
</main>


<div class="modal fade" id="noteModel" tabindex="-1" aria-labelledby="noteModelLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="noteModelLabel">Note</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="mb-3">
          <textarea class="form-control" id="noteText" rows="3"></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>


    </div>
    
  </main>
  
  



<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Confimation</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          Are you sure you want to delete ?
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No</button>
          <button type="button" class="btn btn-primary">Yes</button>
        </div>
      </div>
    </div>
  </div>

<div aria-live="polite" aria-atomic="true">
  <div class="toast-container position-absolute top-0 start-0 p-5 mt-5" id="toast-container">
    
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>
<script type="text/javascript" src="/js/app.js"></script>



  
  
  

<script type="text/javascript" src="/js/chapter.js"></script>


  
</body>

</html>