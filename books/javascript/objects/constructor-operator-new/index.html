<!DOCTYPE html>
<html lang="en">

<head>


  <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <base href="/">
    <title>Project Madurai School</title>

    
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/images/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/images/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/images/favicon-16x16.png"
    />
    <link rel="manifest" href="/images/site.webmanifest" />

    
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />


    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css"
      integrity="sha256-h20CPZ0QyXlBuAw7A+KluUYx/3pK+c7lYEpqLTlxjYQ="
      crossorigin="anonymous"
    />



  


</head>

<body>
  <main class="container mt-5 w-100 h-100">
    <nav class="navbar navbar-expand-md navbar-light bg-white py-0 fixed-top">
  <div class="container-fluid border-bottom border-top-1 shadow-sm bg-body">
    <a class="navbar-brand lh-1" href="/">
      
      
        <span class="text-primary"><strong>Project Madurai</strong></span><br>
        <p class="text-muted text-end w-100 p-0 mb-0"><small class="dropdown-toggle">தமிழ்</small></p>
      </a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsExampleDefault"
      aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarsExampleDefault">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link active" href="/books/javascript">Javascript</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="/books/c">C</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="/practices/java">Java</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="/posts">Blog</a>
        </li>
      </ul>
      <form class="d-flex">
        <input class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>
      <ul class="navbar-nav secured">
        <li class="nav-item btn pe-0">
          <a class="nav-link" href="/chat"><i class="far fa-comment-dots fa-2x"></i></a>
        </li>
        <li class="nav-item pe-0 dropdown">
          
          <div class="btn-group bg-light">
            <a class="btn btn-toggle pe-0" data-bs-toggle="dropdown" aria-expanded="false">
              <div class="d-flex bd-highlight">
                <div class="w-100 bd-highlight text-end">
                  <h6 class="text-muted fw-bold">தமிழ்ச் சங்கம்</h6>
                  <small class="text-muted">திருவள்ளுவர் கழகம்</small>
               </div>
                <div class="flex-shrink-1 bd-highlight">
                  <img src="http://ssl.gstatic.com/accounts/ui/avatar_2x.png" class="img-circle img-thumbnail avatar"
                style="vertical-align: middle;border-radius: 50%; width: 3rem; margin-right: 10px;" alt="avatar">
                </div>
                
                
              </div>
            </a>
            <ul class="dropdown-menu" aria-labelledby="dropdown03">
              <li><a class="dropdown-item" href="javascript://">Profile</a></li>
              <li><a class="dropdown-item" href="/campuses/tamil-sangam">Campus</a></li>
              <li><a class="dropdown-item logout" href="javascript://">Logout</a></li>
            </ul>
          </div>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div class="row py-5 w-100 h-100">
       

  <nav class="navbar border-1 border-bottom">
  <div class="row w-100">
    <div class="col-4">
      <a href="/books/javascript/objects/object-methods">Object methods, &#34;this&#34;</a>
    </div>
    <div class="col-4 mb-2 text-center">
      <a class="text-dark"
        href="/books/javascript/objects">Objects: the basics</a>
    </div>
    <div class="col-4 d-flex justify-content-end align-items-center">
      <a href="/books/javascript/objects/optional-chaining">Optional chaining</a>
    </div>
  </div>
</nav>

<main id="content" class="pt-3"><h1 id="constructor-operator-new">Constructor, operator &ldquo;new&rdquo;</h1>
<p>The regular <code>{...}</code> syntax allows to create one object. But often we need to create many similar objects, like multiple users or menu items and so on.</p>
<p>That can be done using constructor functions and the <code>&quot;new&quot;</code> operator.</p>
<h2 id="constructor-function">Constructor function</h2>
<p>Constructor functions technically are regular functions. There are two conventions though:</p>
<ol>
<li>They are named with capital letter first.</li>
<li>They should be executed only with <code>&quot;new&quot;</code> operator.</li>
</ol>
<p>For instance:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">User</span>(<span style="color:#a6e22e">name</span>) {
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">name</span>;
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">isAdmin</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>;
}

<span style="color:#f92672">*!*</span>
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">user</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">User</span>(<span style="color:#e6db74">&#34;Jack&#34;</span>);
<span style="color:#f92672">*</span><span style="color:#960050;background-color:#1e0010">/!*</span>

<span style="color:#a6e22e">alert</span>(<span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">name</span>); <span style="color:#75715e">// Jack
</span><span style="color:#75715e"></span><span style="color:#a6e22e">alert</span>(<span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">isAdmin</span>); <span style="color:#75715e">// false
</span></code></pre></div><p>When a function is executed with <code>new</code>, it does the following steps:</p>
<ol>
<li>A new empty object is created and assigned to <code>this</code>.</li>
<li>The function body executes. Usually it modifies <code>this</code>, adds new properties to it.</li>
<li>The value of <code>this</code> is returned.</li>
</ol>
<p>In other words, <code>new User(...)</code> does something like:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">User</span>(<span style="color:#a6e22e">name</span>) {
<span style="color:#f92672">*!*</span>
  <span style="color:#75715e">// this = {};  (implicitly)
</span><span style="color:#75715e"></span><span style="color:#f92672">*</span><span style="color:#960050;background-color:#1e0010">/!*</span>

  <span style="color:#75715e">// add properties to this
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">name</span>;
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">isAdmin</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>;

<span style="color:#f92672">*!*</span>
  <span style="color:#75715e">// return this;  (implicitly)
</span><span style="color:#75715e"></span><span style="color:#f92672">*</span><span style="color:#960050;background-color:#1e0010">/!*</span>
}
</code></pre></div><p>So <code>let user = new User(&quot;Jack&quot;)</code> gives the same result as:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">user</span> <span style="color:#f92672">=</span> {
  <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Jack&#34;</span>,
  <span style="color:#a6e22e">isAdmin</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>
};
</code></pre></div><p>Now if we want to create other users, we can call <code>new User(&quot;Ann&quot;)</code>, <code>new User(&quot;Alice&quot;)</code> and so on. Much shorter than using literals every time, and also easy to read.</p>
<p>That&rsquo;s the main purpose of constructors &ndash; to implement reusable object creation code.</p>
<p>Let&rsquo;s note once again &ndash; technically, any function can be used as a constructor. That is: any function can be run with <code>new</code>, and it will execute the algorithm above. The &ldquo;capital letter first&rdquo; is a common agreement, to make it clear that a function is to be run with <code>new</code>.</p>
<pre><code class="language-smart" data-lang="smart">If we have many lines of code all about creation of a single complex object, we can wrap them in constructor function, like this:

```js
let user = new function() {
  this.name = &quot;John&quot;;
  this.isAdmin = false;

  // ...other code for user creation
  // maybe complex logic and statements
  // local variables etc
};
```

The constructor can't be called again, because it is not saved anywhere, just created and called. So this trick aims to encapsulate the code that constructs the single object, without future reuse.
</code></pre><h2 id="constructor-mode-test-newtarget">Constructor mode test: new.target</h2>
<pre><code class="language-smart" data-lang="smart">The syntax from this section is rarely used, skip it unless you want to know everything.
</code></pre><p>Inside a function, we can check whether it was called with <code>new</code> or without it, using a special <code>new.target</code> property.</p>
<p>It is undefined for regular calls and equals the function if called with <code>new</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">User</span>() {
  <span style="color:#a6e22e">alert</span>(<span style="color:#66d9ef">new</span>.<span style="color:#a6e22e">target</span>);
}

<span style="color:#75715e">// without &#34;new&#34;:
</span><span style="color:#75715e"></span><span style="color:#f92672">*!*</span>
<span style="color:#a6e22e">User</span>(); <span style="color:#75715e">// undefined
</span><span style="color:#75715e"></span><span style="color:#f92672">*</span><span style="color:#960050;background-color:#1e0010">/!*</span>

<span style="color:#75715e">// with &#34;new&#34;:
</span><span style="color:#75715e"></span><span style="color:#f92672">*!*</span>
<span style="color:#66d9ef">new</span> <span style="color:#a6e22e">User</span>(); <span style="color:#75715e">// function User { ... }
</span><span style="color:#75715e"></span><span style="color:#f92672">*</span><span style="color:#960050;background-color:#1e0010">/!*</span>
</code></pre></div><p>That can be used inside the function to know whether it was called with <code>new</code>, &ldquo;in constructor mode&rdquo;, or without it, &ldquo;in regular mode&rdquo;.</p>
<p>We can also make both <code>new</code> and regular calls to do the same, like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">User</span>(<span style="color:#a6e22e">name</span>) {
  <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#66d9ef">new</span>.<span style="color:#a6e22e">target</span>) { <span style="color:#75715e">// if you run me without new
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">User</span>(<span style="color:#a6e22e">name</span>); <span style="color:#75715e">// ...I will add new for you
</span><span style="color:#75715e"></span>  }

  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">name</span>;
}

<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">john</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">User</span>(<span style="color:#e6db74">&#34;John&#34;</span>); <span style="color:#75715e">// redirects call to new User
</span><span style="color:#75715e"></span><span style="color:#a6e22e">alert</span>(<span style="color:#a6e22e">john</span>.<span style="color:#a6e22e">name</span>); <span style="color:#75715e">// John
</span></code></pre></div><p>This approach is sometimes used in libraries to make the syntax more flexible. So that people may call the function with or without <code>new</code>, and it still works.</p>
<p>Probably not a good thing to use everywhere though, because omitting <code>new</code> makes it a bit less obvious what&rsquo;s going on. With <code>new</code> we all know that the new object is being created.</p>
<h2 id="return-from-constructors">Return from constructors</h2>
<p>Usually, constructors do not have a <code>return</code> statement. Their task is to write all necessary stuff into <code>this</code>, and it automatically becomes the result.</p>
<p>But if there is a <code>return</code> statement, then the rule is simple:</p>
<ul>
<li>If <code>return</code> is called with an object, then the object is returned instead of <code>this</code>.</li>
<li>If <code>return</code> is called with a primitive, it&rsquo;s ignored.</li>
</ul>
<p>In other words, <code>return</code> with an object returns that object, in all other cases <code>this</code> is returned.</p>
<p>For instance, here <code>return</code> overrides <code>this</code> by returning an object:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">BigUser</span>() {

  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;John&#34;</span>;

  <span style="color:#66d9ef">return</span> { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Godzilla&#34;</span> };  <span style="color:#75715e">// &lt;-- returns this object
</span><span style="color:#75715e"></span>}

<span style="color:#a6e22e">alert</span>( <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">BigUser</span>().<span style="color:#a6e22e">name</span> );  <span style="color:#75715e">// Godzilla, got that object
</span></code></pre></div><p>And here&rsquo;s an example with an empty <code>return</code> (or we could place a primitive after it, doesn&rsquo;t matter):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">SmallUser</span>() {

  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;John&#34;</span>;

  <span style="color:#66d9ef">return</span>; <span style="color:#75715e">// &lt;-- returns this
</span><span style="color:#75715e"></span>}

<span style="color:#a6e22e">alert</span>( <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">SmallUser</span>().<span style="color:#a6e22e">name</span> );  <span style="color:#75715e">// John
</span></code></pre></div><p>Usually constructors don&rsquo;t have a <code>return</code> statement. Here we mention the special behavior with returning objects mainly for the sake of completeness.</p>
<pre><code class="language-smart" data-lang="smart">By the way, we can omit parentheses after `new`, if it has no arguments:

```js
let user = new User; // &lt;-- no parentheses
// same as
let user = new User();
```

Omitting parentheses here is not considered a &quot;good style&quot;, but the syntax is permitted by specification.
</code></pre><h2 id="methods-in-constructor">Methods in constructor</h2>
<p>Using constructor functions to create objects gives a great deal of flexibility. The constructor function may have parameters that define how to construct the object, and what to put in it.</p>
<p>Of course, we can add to <code>this</code> not only properties, but methods as well.</p>
<p>For instance, <code>new User(name)</code> below creates an object with the given <code>name</code> and the method <code>sayHi</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">User</span>(<span style="color:#a6e22e">name</span>) {
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">name</span>;

  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">sayHi</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>() {
    <span style="color:#a6e22e">alert</span>( <span style="color:#e6db74">&#34;My name is: &#34;</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span> );
  };
}

<span style="color:#f92672">*!*</span>
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">john</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">User</span>(<span style="color:#e6db74">&#34;John&#34;</span>);

<span style="color:#a6e22e">john</span>.<span style="color:#a6e22e">sayHi</span>(); <span style="color:#75715e">// My name is: John
</span><span style="color:#75715e"></span><span style="color:#f92672">*</span><span style="color:#960050;background-color:#1e0010">/!*</span>

<span style="color:#75715e">/*
</span><span style="color:#75715e">john = {
</span><span style="color:#75715e">   name: &#34;John&#34;,
</span><span style="color:#75715e">   sayHi: function() { ... }
</span><span style="color:#75715e">}
</span><span style="color:#75715e">*/</span>
</code></pre></div><p>To create complex objects, there&rsquo;s a more advanced syntax, <a href="info:classes">classes</a>, that we&rsquo;ll cover later.</p>
<h2 id="summary">Summary</h2>
<ul>
<li>Constructor functions or, briefly, constructors, are regular functions, but there&rsquo;s a common agreement to name them with capital letter first.</li>
<li>Constructor functions should only be called using <code>new</code>. Such a call implies a creation of empty <code>this</code> at the start and returning the populated one at the end.</li>
</ul>
<p>We can use constructor functions to make multiple similar objects.</p>
<p>JavaScript provides constructor functions for many built-in language objects: like <code>Date</code> for dates, <code>Set</code> for sets and others that we plan to study.</p>
<pre><code class="language-smart" data-lang="smart">In this chapter we only cover the basics about objects and constructors. They are essential for learning more about data types and functions in the next chapters.

After we learn that, we return to objects and cover them in-depth in the chapters &lt;info:prototypes&gt; and &lt;info:classes&gt;.
</code></pre></main>


<div class="modal fade" id="noteModel" tabindex="-1" aria-labelledby="noteModelLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="noteModelLabel">Note</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="mb-3">
          <textarea class="form-control" id="noteText" rows="3"></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>


    </div>
    
  </main>
  
  



<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Confimation</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          Are you sure you want to delete ?
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No</button>
          <button type="button" class="btn btn-primary">Yes</button>
        </div>
      </div>
    </div>
  </div>

<div aria-live="polite" aria-atomic="true">
  <div class="toast-container position-absolute top-0 start-0 p-5 mt-5" id="toast-container">
    
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>
<script type="text/javascript" src="/js/app.js"></script>



  
  
  

<script type="text/javascript" src="/js/chapter.js"></script>


  
</body>

</html>