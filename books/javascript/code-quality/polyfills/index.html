<!DOCTYPE html>
<html lang="en">

<head>


  <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <base href="/">
    <title>Project Madurai School</title>

    
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/images/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/images/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/images/favicon-16x16.png"
    />
    <link rel="manifest" href="/images/site.webmanifest" />

    
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />


    

    <link rel="stylesheet" href="/css/style.css"/>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css"
      integrity="sha256-h20CPZ0QyXlBuAw7A+KluUYx/3pK+c7lYEpqLTlxjYQ="
      crossorigin="anonymous"
    />



  


</head>

<body>
  <main class="container mt-5 w-100 h-100">
    <nav class="navbar navbar-expand-md navbar-light bg-white py-0 fixed-top">
  <div class="container-fluid border-bottom border-top-1 shadow-sm bg-body">
    <a class="navbar-brand lh-1" href="/">
      
      
        <span class="text-primary"><strong>Project Madurai</strong></span><br>
        <p class="text-muted text-end w-100 p-0 mb-0"><small class="dropdown-toggle">தமிழ்</small></p>
      </a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsExampleDefault"
      aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarsExampleDefault">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link active" href="/books/javascript">Javascript</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="/books/c">C</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="/practices/java">Java</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="/posts">Blog</a>
        </li>
      </ul>
      <form class="d-flex">
        <input class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>
      <ul class="navbar-nav secured">
        <li class="nav-item btn pe-0">
          <a class="nav-link" href="/chat"><i class="far fa-comment-dots fa-2x"></i></a>
        </li>
        <li class="nav-item pe-0 dropdown">
          
          <div class="btn-group bg-light">
            <a class="btn btn-toggle pe-0" data-bs-toggle="dropdown" aria-expanded="false">
              <div class="d-flex bd-highlight">
                <div class="w-100 bd-highlight text-end">
                  <h6 class="text-muted fw-bold">தமிழ்ச் சங்கம்</h6>
                  <small class="text-muted">திருவள்ளுவர் கழகம்</small>
               </div>
                <div class="flex-shrink-1 bd-highlight">
                  <img src="http://ssl.gstatic.com/accounts/ui/avatar_2x.png" class="img-circle img-thumbnail avatar"
                style="vertical-align: middle;border-radius: 50%; width: 3rem; margin-right: 10px;" alt="avatar">
                </div>
                
                
              </div>
            </a>
            <ul class="dropdown-menu" aria-labelledby="dropdown03">
              <li><a class="dropdown-item" href="javascript://">Profile</a></li>
              <li><a class="dropdown-item" href="/campuses/tamil-sangam">Campus</a></li>
              <li><a class="dropdown-item logout" href="javascript://">Logout</a></li>
            </ul>
          </div>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div class="row py-5 w-100 h-100">
       

  <nav class="navbar border-1 border-bottom">
  <div class="row w-100">
    <div class="col-4">
      <a href="/books/javascript/code-quality/automatted-testing-with-mocha">Automated testing with Mocha</a>
    </div>
    <div class="col-4 mb-2 text-center">
      <a class="text-dark"
        href="/books/javascript/code-quality">Code Quality</a>
    </div>
    <div class="col-4 d-flex justify-content-end align-items-center">
      
    </div>
  </div>
</nav>

<main id="content" class="pt-3"><h1 id="polyfills-and-transpilers">Polyfills and transpilers</h1>
<p>The JavaScript language steadily evolves. New proposals to the language appear regularly, they are analyzed and, if considered worthy, are appended to the list at <a href="https://tc39.github.io/ecma262/">https://tc39.github.io/ecma262/</a> and then progress to the <a href="http://www.ecma-international.org/publications/standards/Ecma-262.htm">specification</a>.</p>
<p>Teams behind JavaScript engines have their own ideas about what to implement first. They may decide to implement proposals that are in draft and postpone things that are already in the spec, because they are less interesting or just harder to do.</p>
<p>So it&rsquo;s quite common for an engine to implement only the part of the standard.</p>
<p>A good page to see the current state of support for language features is <a href="https://kangax.github.io/compat-table/es6/">https://kangax.github.io/compat-table/es6/</a> (it&rsquo;s big, we have a lot to study yet).</p>
<p>As programmers, we&rsquo;d like to use most recent features. The more good stuff - the better!</p>
<p>On the other hand, how to make our modern code work on older engines that don&rsquo;t understand recent features yet?</p>
<p>There are two tools for that:</p>
<ol>
<li>Transpilers.</li>
<li>Polyfills.</li>
</ol>
<p>Here, in this chapter, our purpose is to get the gist of how they work, and their place in web development.</p>
<h2 id="transpilers">Transpilers</h2>
<p>A <a href="https://en.wikipedia.org/wiki/Source-to-source_compiler">transpiler</a> is a special piece of software that can parse (&ldquo;read and understand&rdquo;) modern code, and rewrite it using older syntax constructs, so that the result would be the same.</p>
<p>E.g. JavaScript before year 2020 didn&rsquo;t have the &ldquo;nullish coalescing operator&rdquo; <code>??</code>. So, if a visitor uses an outdated browser, it may fail to understand the code like <code>height = height ?? 100</code>.</p>
<p>A transpiler would analyze our code and rewrite <code>height ?? 100</code> into <code>(height !== undefined &amp;&amp; height !== null) ? height : 100</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">// before running the transpiler
</span><span style="color:#75715e"></span><span style="color:#a6e22e">height</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">height</span> <span style="color:#f92672">??</span> <span style="color:#ae81ff">100</span>;

<span style="color:#75715e">// after running the transpiler
</span><span style="color:#75715e"></span><span style="color:#a6e22e">height</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">height</span> <span style="color:#f92672">!==</span> <span style="color:#66d9ef">undefined</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">height</span> <span style="color:#f92672">!==</span> <span style="color:#66d9ef">null</span>) <span style="color:#f92672">?</span> <span style="color:#a6e22e">height</span> <span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span>;
</code></pre></div><p>Now the rewritten code is suitable for older JavaScript engines.</p>
<p>Usually, a developer runs the transpiler on their own computer, and then deploys the transpiled code to the server.</p>
<p>Speaking of names, <a href="https://babeljs.io">Babel</a> is one of the most prominent transpilers out there.</p>
<p>Modern project build systems, such as <a href="http://webpack.github.io/">webpack</a>, provide means to run transpiler automatically on every code change, so it&rsquo;s very easy to integrate into development process.</p>
<h2 id="polyfills">Polyfills</h2>
<p>New language features may include not only syntax constructs and operators, but also built-in functions.</p>
<p>For example, <code>Math.trunc(n)</code> is a function that &ldquo;cuts off&rdquo; the decimal part of a number, e.g <code>Math.trunc(1.23)</code> returns <code>1</code>.</p>
<p>In some (very outdated) JavaScript engines, there&rsquo;s no <code>Math.trunc</code>, so such code will fail.</p>
<p>As we&rsquo;re talking about new functions, not syntax changes, there&rsquo;s no need to transpile anything here. We just need to declare the missing function.</p>
<p>A script that updates/adds new functions is called &ldquo;polyfill&rdquo;. It &ldquo;fills in&rdquo; the gap and adds missing implementations.</p>
<p>For this particular case, the polyfill for <code>Math.trunc</code> is a script that implements it, like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>Math.<span style="color:#a6e22e">trunc</span>) { <span style="color:#75715e">// if no such function
</span><span style="color:#75715e"></span>  <span style="color:#75715e">// implement it
</span><span style="color:#75715e"></span>  Math.<span style="color:#a6e22e">trunc</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">number</span>) {
    <span style="color:#75715e">// Math.ceil and Math.floor exist even in ancient JavaScript engines
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// they are covered later in the tutorial
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">number</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">?</span> Math.<span style="color:#a6e22e">ceil</span>(<span style="color:#a6e22e">number</span>) <span style="color:#f92672">:</span> Math.<span style="color:#a6e22e">floor</span>(<span style="color:#a6e22e">number</span>);
  };
}
</code></pre></div><p>JavaScript is a highly dynamic language, scripts may add/modify any functions, even including built-in ones.</p>
<p>Two interesting libraries of polyfills are:</p>
<ul>
<li><a href="https://github.com/zloirock/core-js">core js</a> that supports a lot, allows to include only needed features.</li>
<li><a href="http://polyfill.io">polyfill.io</a> service that provides a script with polyfills, depending on the features and user&rsquo;s browser.</li>
</ul>
<h2 id="summary">Summary</h2>
<p>In this chapter we&rsquo;d like to motivate you to study modern and even &ldquo;bleeding-edge&rdquo; language features, even if they aren&rsquo;t yet well-supported by JavaScript engines.</p>
<p>Just don&rsquo;t forget to use transpiler (if using modern syntax or operators) and polyfills (to add functions that may be missing). And they&rsquo;ll ensure that the code works.</p>
<p>For example, later when you&rsquo;re familiar with JavaScript, you can setup a code build system based on <a href="http://webpack.github.io/">webpack</a> with <a href="https://github.com/babel/babel-loader">babel-loader</a> plugin.</p>
<p>Good resources that show the current state of support for various features:</p>
<ul>
<li><a href="https://kangax.github.io/compat-table/es6/">https://kangax.github.io/compat-table/es6/</a> - for pure JavaScript.</li>
<li><a href="https://caniuse.com/">https://caniuse.com/</a> - for browser-related functions.</li>
</ul>
<p>P.S. Google Chrome is usually the most up-to-date with language features, try it if a tutorial demo fails. Most tutorial demos work with any modern browser though.</p>
</main>


<div class="modal fade" id="noteModel" tabindex="-1" aria-labelledby="noteModelLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="noteModelLabel">Note</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="mb-3">
          <textarea class="form-control" id="noteText" rows="3"></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>


    </div>
    
  </main>
  
  



<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Confimation</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          Are you sure you want to delete ?
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No</button>
          <button type="button" class="btn btn-primary">Yes</button>
        </div>
      </div>
    </div>
  </div>

<div aria-live="polite" aria-atomic="true">
  <div class="toast-container position-absolute top-0 start-0 p-5 mt-5" id="toast-container">
    
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>
<script type="text/javascript" src="/js/app.js"></script>



  
  
  

<script type="text/javascript" src="/js/chapter.js"></script>


  
</body>

</html>